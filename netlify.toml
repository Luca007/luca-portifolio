# Settings in the [build] context are global and applied to all contexts
# unless otherwise overridden by more specific contexts.
[build]
  # Directory to change to before starting a build.
  # This is where we will look for package.json/.nvmrc/etc.
  base = "/"

  # Directory that contains the deploy-ready HTML files and assets
  # generated by the build.
  publish = "out"

  # Default build command.
  command = "cd javinator-portfolio && bun run build"

# Set up proper caching for better performance
[[headers]]
  # Cache all static assets longer
  for = "/*.(js|css|woff|woff2|ttf|otf|eot|png|jpg|jpeg|webp|svg|gif)"
  [headers.values]
    Cache-Control = "public, max-age=31536000, immutable"

[[headers]]
  # Cache HTML files for a shorter duration
  for = "/*.html"
  [headers.values]
    Cache-Control = "public, max-age=300, must-revalidate"

[[headers]]
  # Cache service worker and manifest
  for = "/*.(json|xml|txt)"
  [headers.values]
    Cache-Control = "public, max-age=3600"

# Netlify image optimization
[images]
  compress = true

# Improve performance with preloading/prefetching
[[redirects]]
  from = "/*"
  to = "/index.html"
  status = 200
